************************************************************************
* IBM Tivoli Storage Manager                                           *
*                                                                      *
* Client System Options file for UNIX (dsm.sys)                        *
************************************************************************
*
*  This file identifies the server and communication method, and
*  provides the configuration for backup, archiving, hierarchial
*  storage management, and scheduling.
*
*  Lines starting with an asterisk (*) are comments.
*
*  If you update this file while the client is running, you must
*  restart the client to pick up the changes.
*
*  If your client node communicates with multiple TSM servers, be
*  sure to add a stanza, beginning with the SERVERNAME option, for
*  each additional server.
*
************************************************************************
*
* {{ ansible_managed }}
*
* This file was generated by Ansible for {{ ansible_fqdn }}
* Do NOT modify this file by hand!
*
************************************************************************

* TSM backup server and the connection parameters
SErvername  {{ tsmbackup_server }}
   COMMMethod         {{ tsmbackup_server_comm_method }}
   TCPServeraddress   {{ tsmbackup_server }}
{% if tsmbackup_ssl|bool %}
   TCPPort            {{ tsmbackup_server_port|default('1542') }}
   SSL                yes
{% else %}
   TCPPort            {{ tsmbackup_server_port|default('1500') }}
{% endif %}


* Identify this machine to the TSM backup server
NODENAME {{ tsmbackup_nodename|default(ansible_fqdn) }}

* Your user account
USERS {{ tsmbackup_user|default(ansible_user) }}

* Generate a new password each time it expires and store it encrypted
PASSWORDACCESS GENERATE

* Specify the directory for passwords
PASSWORDDIR /opt/tivoli/tsm/client/ba/bin/


**
* Logging
**
ERRORLOGName        "{{ tsmbackup_error_log }}"
ERRORLOGRetention   30
SCHEDLOGName        "{{ tsmbackup_scheduler_log }}"
SCHEDLOGRetention   30


**
* Performance
**
* Remove the asterisk to specify the TCP window size
*TCPWINDOWSIZE      1024

* Remove the asterisk to specify the TCP buffer size
*TCPBUFFSIZE        512

* Compress files before sending them to the backup server
*   (Default: No)
COMPRESSION         YES

DEDUPLication       YES


**
* Security options
**
AUTODEPLOY                NO
CADLISTENONPort           NO
MANAGEDServices           schedule
SCHEDCMDDisabled          YES
SCHEDRESTRETRDisabled     YES
SRVPREPOSTSCHeddisabled   YES
SRVPREPOSTSNApdisabled    YES
SSLACCEPTCERTFROMSERV     NO


* Specify the file that contains the directories/files to
* include or exclude from the backup (optional)
INCLEXCL /opt/tivoli/tsm/client/ba/bin/tsm.exclude.list

* Define virtual mount points for specific directories to back up
* This is useful if you do not want to backup the entire file system
{% for _directory in tsmbackup_backup_dirs %}
{% if _directory != "all-local" %}
VIRTUALMountpoint {{ _directory }}
{% endif %}
{% endfor %}

