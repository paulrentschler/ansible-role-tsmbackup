************************************************************************
* IBM Tivoli Storage Manager                                           *
*                                                                      *
* Client System Options file for UNIX (dsm.sys)                        *
************************************************************************
*
*  This file identifies the server and communication method, and
*  provides the configuration for backup, archiving, hierarchial
*  storage management, and scheduling.
*
*  Lines starting with an asterisk (*) are comments.
*
*  If you update this file while the client is running, you must
*  restart the client to pick up the changes.
*
*  If your client node communicates with multiple TSM servers, be
*  sure to add a stanza, beginning with the SERVERNAME option, for
*  each additional server.
*
************************************************************************
*
* {{ ansible_managed }}
*
* This file was generated by Ansible for {{ inventory_hostname }}
* Do NOT modify this file by hand!
*
************************************************************************

* TSM backup server and the connection parameters
SErvername  {{ tsmbackup_server }}
   COMMMethod         {{ tsmbackup_server_comm_method }}
   TCPPort            {{ tsmbackup_server_port }}
   TCPServeraddress   {{ tsmbackup_server }}


* Identify this machine to the TSM backup server
NODENAME {{ tsmbackup_nodename|default(inventory_hostname) }}

* Your user account
USERS {{ tsmbackup_user|default(ansible_user) }}

* The log files for the scheduler and errors
SCHEDLOGNAME "{{ tsmbackup_scheduler_log }}"
ERRORLOGNAME "{{ tsmbackup_error_log }}"


* Specify the file that contains the directories/files to
* include or exclude from the backup (optional)
INCLEXCL /opt/tivoli/tsm/client/ba/bin/tsm.exclude.list

* Remove the asterisk to specify the TCP window size
*TCPWINDOWSIZE 1024

* Remove the asterisk to specify the TCP buffer size
*TCPBUFFSIZE 512

* Compress files before sending them to the backup server
*   (Default: No)
COMPRESSION YES

* Specify the directory for passwords
PASSWORDDIR /opt/tivoli/tsm/client/ba/bin/

* Generate a new password each time it expires and store it encrypted
PASSWORDACCESS GENERATE

* Specify the services that are managed
MANAGEDServices schedule webclient

* Define virtual mount points for specific directories to back up
* This is useful if you do not want to backup the entire file system
{% for _directory in tsmbackup_backup_dirs %}
{% if _directory != "all-local" %}
VIRTUALMountpoint {{ _directory }}
{% endif %}
{% endfor %}
